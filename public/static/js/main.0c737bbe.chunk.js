(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var a,c=n(1),r=n.n(c),s=n(26),o=n.n(s),i=n(22),l=n(3),d=n(2),u=n(4),j=n(5),m=n(44),b=n(50),O=function(e){(a=Object(b.a)("https://coup-alan.herokuapp.com")).on("gameCreated",(function(t){e({type:"GET_GAMES",payload:t})})),a.on("getGame",(function(t){var n=t,c=null===t||void 0===t?void 0:t.gamer.filter((function(e){return e.connectionId===a.id})),r=null===t||void 0===t?void 0:t.gamer.filter((function(e){return e.connectionId!==a.id}));n.gamer=r,n.myUser=c[0],e({type:"GET_GAME",payload:n}),e({type:"SET_ACTION",payload:null})})),a.on("attacked",(function(t){e({type:"SET_ATTACKER",payload:t})})),a.on("coup",(function(t){e({type:"SET_COUP",payload:t})})),a.on("attackedGlobal",(function(t){e({type:"SET_ATTACKER_GLOBAL",payload:t})})),a.on("blocked",(function(t){e({type:"SET_BLOCKER",payload:t}),e({type:"SET_ACTION",payload:null})})),a.on("lostCard",(function(){e({type:"LOST_CARD",payload:{variable:"lostCard"}})})),a.on("descartOneCard",(function(t){e({type:"DESCART_CARD",payload:t})})),a.on("lostGame",(function(t){e({type:"RESULT",payload:"lost"})})),a.on("win",(function(t){e({type:"RESULT",payload:"win"})})),a.on("actionOtherUser",(function(t){e({type:"SET_ACTION",payload:{msg:t}})}))},p=function(e,t,n,c){a.emit("useCard",{card:e,idGame:t,username:n,attacker:c})},h=function(e,t,n){a.emit("useCardGlobal",{card:e,idGame:t,attacker:n})},f=function(e,t,n,c){a.emit("blockCard",{card:e,idGame:t,attacker:n,blocker:c})},x=function(e,t,n,c){a.emit("allow",{idGame:e,attacked:t,attackedBy:n,card:c})},y=function(e,t){a.emit("lostCard",{idGame:e,loser:t})},g=function(e,t,n){a.emit("lostCardSelected",{idGame:e,loser:t,card:n})},v=function(e,t){a.emit("endGame",{idGame:e,loser:t})},C=(n(66),n(0)),T=function(){var e=Object(d.c)((function(e){return Object(u.a)({},e)})).action;return Object(C.jsx)("div",{className:"messageAction",children:e.msg})},E=(n(68),function(e){var t=e.msg,n=e.setError;return Object(c.useEffect)((function(){setTimeout((function(){return n("")}),3e3)}),[]),Object(C.jsx)("div",{className:"message",children:t})}),k=(n(69),function(e){var t=e.gamers,n=e.card,a=e.setCardSelected,c=e.setError,r=Object(d.c)((function(e){return Object(u.a)({},e)})),s=r.user,o=r.game,i=Object(d.b)();return Object(C.jsxs)("div",{className:"selectOponent",children:[Object(C.jsx)("h1",{children:"Selecciona tu oponente"}),Object(C.jsx)("div",{style:{display:"flex"},children:t.map((function(e){return Object(C.jsx)("button",{onClick:function(){return function(e){switch(a(""),n){case"capitan":p("capitan",o.idGame,e,s.username),i({type:"SET_ACTION",payload:{msg:"Atacaste a ".concat(e," con el Capitan")}});break;case"asesina":if(o.myUser.money.length>2)return p("asesina",o.idGame,e,s.username),void i({type:"SET_ACTION",payload:{msg:"Atacaste a ".concat(e," con la Asesina")}});c("No tienes suficiente monedas.");break;case"coup":if(o.myUser.money.length>6)return 1===o.gamer.filter((function(t){return t.user===e}))[0].cards.length?void v(o.idGame,e):(p("coup",o.idGame,e,s.username),void i({type:"SET_ACTION",payload:{msg:"Atacaste a ".concat(e," con COUP")}}));c("No tienes suficiente monedas.")}}(e.user)},children:e.user})}))})]})}),G=(n(70),function(){var e=Object(d.c)((function(e){return Object(u.a)({},e)})),t=e.user,n=e.game,r=e.attacker,s=e.action,o=Object(d.b)(),i=Object(c.useState)(!1),l=Object(j.a)(i,2),b=l[0],O=l[1],g=Object(c.useState)(""),G=Object(j.a)(g,2),_=G[0],S=G[1],N=Object(c.useState)(""),A=Object(j.a)(N,2),R=A[0],B=A[1],L=function(e){if("initial"!==n.state)if(1===n.gamer.length)switch(e){case"capitan":n.turn="next",p("capitan",n.idGame,n.gamer[0].user,t.username),o({type:"SET_ACTION",payload:{msg:"Atacaste a ".concat(n.gamer[0].user," con el Capitan")}});break;case"asesina":if(n.myUser.money.length>2)return n.turn="next",p("asesina",n.idGame,n.gamer[0].user,t.username),void o({type:"SET_ACTION",payload:{msg:"Atacaste a ".concat(n.gamer[0].user," con la Asesina")}});S("No tienes suficiente monedas.");break;case"coup":if(n.myUser.money.length>6)return n.turn="next",1===n.gamer[0].cards.length?void v(n.idGame,n.gamer[0].user):(p("coup",n.idGame,n.gamer[0].user,t.username),void o({type:"SET_ACTION",payload:{msg:"Atacaste a ".concat(n.gamer[0].user," con COUP")}}));S("No tienes suficiente monedas.")}else B(e);else S("No es tu turno")},D=function(e){if("initial"!==n.state)switch(e){case"embajador":n.turn="next",h("embajador",n.idGame,t.username),o({type:"SET_ACTION",payload:{msg:"Usaste el Embajador"}});break;case"duque":n.turn="next",h("duque",n.idGame,t.username),o({type:"SET_ACTION",payload:{msg:"Usaste el Duque"}})}else S("No es tu turno")},I=function(e){f(e,n.idGame,r.attackedBy,t.username),o({type:"SET_ATTACKER",payload:null}),o({type:"SET_ACTION",payload:{msg:"Bloqueaste a ".concat(r.attackedBy," con ").concat(e)}})},U=function(){if("asesina"===r.card)return o({type:"SET_ATTACKER",payload:null}),1===n.myUser.cards.length?void v(n.idGame,t.username):void o({type:"LOST_CARD",payload:{variable:"lostCard"}});x(n.idGame,t.username,r.attackedBy,r.card),o({type:"SET_ATTACKER",payload:null})},q=function(){var e=n.gamer.filter((function(e){return e.user===r.attackedBy}));if(e[0].cards.filter((function(e){return e===r.card}))[0]){if(1===n.myUser.cards.length)return v(n.idGame,t.username),void o({type:"SET_ATTACKER",payload:null});if("asesina"===r.card)return v(n.idGame,t.username),void o({type:"SET_ATTACKER",payload:null});o({type:"SET_ATTACKER",payload:null}),o({type:"LOST_CARD",payload:{variable:"lostCard"}})}else{if(1===e[0].cards.length)return v(n.idGame,r.attackedBy),void o({type:"SET_ATTACKER",payload:null});y(n.idGame,r.attackedBy),o({type:"SET_ATTACKER",payload:null})}};return Object(C.jsxs)(C.Fragment,{children:[R&&Object(C.jsx)(k,{gamers:n.gamer,card:R,setCardSelected:B,setError:S}),_&&Object(C.jsx)(E,{msg:_,setError:S}),s&&Object(C.jsx)(T,{}),Object(C.jsxs)("div",{className:"home__controls",children:[Object(C.jsx)("div",{className:"home__controls-money",children:n&&n.myUser.money.map((function(e){return Object(C.jsx)("div",{className:"money"})}))}),Object(C.jsx)("div",{className:"home__controls-cards",children:n&&n.myUser.cards.map((function(e,t){return Object(C.jsxs)("div",{className:"home__controls-card",children:[Object(C.jsx)("img",{src:"/cards/".concat(e,".png"),alt:""}),Object(C.jsxs)("div",{className:"detail-card",children:[Object(C.jsx)("p",{children:e}),Object(C.jsx)("span",{children:m[e]})]})]},t)}))}),Object(C.jsxs)("div",{className:"home__controls-bottons",children:[Object(C.jsx)("button",{onClick:function(){var e,c;n.turn===t.username&&"initial"!==n.state?(e=n.idGame,c=t.username,a.emit("takeMoney",{idGame:e,username:c}),B("")):S("No es tu turno")},children:"Tomar Moneda"}),Object(C.jsx)("button",{onClick:function(){return O(!b)},children:"Jugar"})]})]}),b?n.turn===t.username?Object(C.jsxs)("div",{className:"optionGame",children:[Object(C.jsx)("button",{onClick:function(){return L("capitan")},children:"Tengo el Capitan"}),Object(C.jsx)("button",{onClick:function(){return D("embajador")},children:"Tengo el Embajador"}),Object(C.jsx)("button",{onClick:function(){return D("duque")},children:"Tengo el Duque"}),Object(C.jsx)("button",{onClick:function(){return L("asesina")},children:"Tengo la Asesina"}),Object(C.jsx)("button",{onClick:function(){return L("coup")},children:"COUP"})]}):Object(C.jsx)("div",{className:"optionGame",children:r?"capitan"===r.card?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("button",{onClick:function(){return I("capitan")},children:"Tengo el Capitan"}),Object(C.jsx)("button",{onClick:function(){return I("embajador")},children:"Tengo el Embajador"}),Object(C.jsx)("button",{onClick:q,children:"Desconfio"}),Object(C.jsx)("button",{onClick:U,children:"Permitir"})]}):"asesina"===r.card?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("button",{onClick:function(){return I("condesa")},children:"Tengo la Condesa"}),Object(C.jsx)("button",{onClick:q,children:"Desconfio"}),Object(C.jsx)("button",{onClick:U,children:"Permitir"})]}):"duque"===r.card?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("button",{onClick:q,children:"Desconfio"}),Object(C.jsx)("button",{onClick:U,children:"Permitir"})]}):"embajador"===r.card&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("button",{children:"Tengo el Duque"}),Object(C.jsx)("button",{onClick:q,children:"Desconfio"}),Object(C.jsx)("button",{onClick:U,children:"Permitir"})]}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("button",{children:"Tengo el Capitan"}),Object(C.jsx)("button",{children:"Tengo el Embajador"}),Object(C.jsx)("button",{children:"Tengo la Condesa"}),Object(C.jsx)("button",{children:"Tengo el Duque"}),Object(C.jsx)("button",{children:"Desconfio"})]})}):""]})}),_=(n(71),function(){var e=Object(d.c)((function(e){return Object(u.a)({},e)})),t=e.descart,n=e.game,c=Object(d.b)(),r=function(e){var r=t.cards.indexOf(e);t.cards.splice(r,1),function(e){a.emit("useReturnCardAmbassador",e)}({idGame:n.idGame,cards:t.cards,returnCard:e,user:t.user}),c({type:"DESCART_CARD",payload:null})};return Object(C.jsxs)("div",{className:"descartOneCard",children:[Object(C.jsx)("h2",{children:"Descartar Una"}),Object(C.jsx)("div",{className:"descartCard",children:t.cards.map((function(e,t){return Object(C.jsx)("button",{onClick:function(){return r(e)},children:e},t)}))})]})}),S=(n(72),function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(d.c)((function(e){return Object(u.a)({},e)})),s=r.user,o=r.game;return Object(C.jsxs)(C.Fragment,{children:[n&&Object(C.jsx)(E,{msg:n,setError:a}),Object(C.jsx)("div",{onClick:function(){console.log("Salir"),o.turn===s.username?v(o.idGame,s.username):a("No es tu turno. Puedes salir de la partida en tu turno.")},className:"endGameOption",children:"X"})]})}),N=(n(73),function(e){var t=e.position,n=Object(c.useState)(!1),a=Object(j.a)(n,2),r=a[0],s=a[1];return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("div",{onClick:function(){return s(!0)},className:"instruction",style:{top:t},children:"?"}),r&&Object(C.jsxs)("div",{className:"instruction_modal",children:[Object(C.jsx)("div",{onClick:function(){return s(!1)},className:"instruction",style:{top:t},children:"X"}),Object(C.jsxs)("div",{className:"instruction_container",children:[Object(C.jsx)("h2",{children:"Un juego de estrategia y enga\xf1o para ser el unico jugador con alguna carta en mano."}),Object(C.jsx)("br",{}),Object(C.jsx)("h3",{children:"Inicio del juego"}),Object(C.jsxs)("div",{className:"instruction-start_game",children:[Object(C.jsx)("p",{children:"Maximo de 3 jugadores y minimo de 2."}),Object(C.jsx)("p",{children:"Cada jugador recibe 2 cartas y dos monedas."}),Object(C.jsx)("p",{children:"Los jugadores deben familiarizarse con todas las acciones y personajes antes de que el juego comience."})]}),Object(C.jsx)("h3",{children:"Acciones Globales"}),Object(C.jsxs)("div",{className:"instruction-start_game",children:[Object(C.jsxs)("p",{children:[Object(C.jsx)("b",{children:"Tomar una moneda:"})," Solo toma una moneda y pasa el turno."]}),Object(C.jsxs)("p",{children:[Object(C.jsx)("b",{children:"Usar COUP:"})," Si tienes 7 monedas puedes usar esta accion para eliminar una carta a un jugador."]}),Object(C.jsxs)("p",{children:[Object(C.jsx)("b",{children:"Desconfiar:"})," Cuando alguien usa a un personaje puedes usar la accion de desconfiar si crees que no tiene ese personaje en su mano, pero CUIDADO si en verdad tiene al personaje automaticamente pierdes una carta. Pero si no la tiene ese jugador es quien pierde una carta."]})]}),Object(C.jsx)("h3",{children:"Acciones de Personajes"}),Object(C.jsxs)("div",{className:"instruction-start_game",children:[Object(C.jsx)("b",{children:"Duque "}),Object(C.jsx)("p",{children:"- Toma 3 monedas."}),Object(C.jsx)("p",{children:"- Bloquea intercambio al embajador."}),Object(C.jsx)("b",{children:"Asesina "}),Object(C.jsx)("p",{children:"- Paga 3 monedas y asesina de un jugador. Si triunfa, este jugador pierde inmediatamente una carta."}),Object(C.jsx)("p",{children:"(Puede ser bloqueado por la condesa)."}),Object(C.jsx)("p",{children:"Cuidado con la asesina, si un jugador usa la asesina y desconfias y el jugador si tiene la carta automaticamente pierdes dos cartas una por desconfiar y otra por el asesinato. De igual manera si finges tener la condesa y eres desafiado."}),Object(C.jsx)("b",{children:"Condesa "}),Object(C.jsx)("p",{children:"- Bloquea a la asesina."}),Object(C.jsx)("b",{children:"Capitan "}),Object(C.jsx)("p",{children:"- Roba 2 monedas a un jugador, si el jugador tiene solo una moneda pues solo roba una."}),Object(C.jsx)("p",{children:"- Puede bloquear robos de otro capitan."}),Object(C.jsx)("p",{children:"- (Puede ser bloqueado por el capitan y el embajador)."}),Object(C.jsx)("b",{children:"Embajador "}),Object(C.jsx)("p",{children:"- Puede intercambiar una carta con el mazo."}),Object(C.jsx)("p",{children:"- Bloquea robos del capitan."}),Object(C.jsx)("p",{children:"- (Puede ser bloqueado por el duque)."}),Object(C.jsx)("br",{})]})]})]})]})}),A=(n(74),function(){var e=Object(d.c)((function(e){return Object(u.a)({},e)})).game;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{className:"home__main",children:[Object(C.jsx)("div",{className:"home__main-oponent1",children:e&&e.gamer[0]&&e.gamer[0].cards.map((function(e,t){return Object(C.jsx)("div",{className:"home__main-oponent-card"},t)}))}),Object(C.jsxs)("div",{className:"home__main-table",children:[Object(C.jsxs)("div",{className:"table-money",children:[Object(C.jsx)("div",{className:"money",style:{margin:"-10px",position:"absolute",border:"1px solid yellow"}}),Object(C.jsx)("div",{className:"money",style:{border:"1px solid yellow"}}),Object(C.jsx)("div",{className:"money",style:{margin:"-15px",border:"1px solid yellow"}}),Object(C.jsx)("div",{className:"money",style:{marginTop:"-10px",position:"absolute",border:"1px solid yellow"}})]}),Object(C.jsx)("div",{className:"table-mazo"})]}),Object(C.jsx)("div",{className:"home__main-oponent2",children:e&&e.gamer[1]&&e.gamer[1].cards.map((function(e,t){return Object(C.jsx)("div",{className:"home__main-oponent-card"},t)}))})]}),e&&e.gamer[0]&&Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("div",{className:"Details-oponent1",children:[Object(C.jsx)("h2",{children:e.gamer[0].user}),Object(C.jsx)("div",{className:"money-aponent1",children:e.gamer[0].money.map((function(e){return Object(C.jsx)("div",{className:"money"})}))})]})}),e&&e.gamer[1]&&Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("div",{className:"Details-oponent2",children:[Object(C.jsx)("h2",{children:e.gamer[1].user}),Object(C.jsx)("div",{className:"money-aponent2",children:e.gamer[1].money.map((function(e){return Object(C.jsx)("div",{className:"money"})}))})]})})]})}),R=(n(75),function(){var e=Object(d.c)((function(e){return Object(u.a)({},e)})).attacker;return Object(C.jsx)("div",{className:"attacked",children:"".concat(e.attackedBy," esta usando ").concat(e.card)})}),B=(n(76),function(){var e=Object(d.c)((function(e){return Object(u.a)({},e)})),t=e.game,n=e.user,r=e.attackerGlobal,s=Object(c.useState)(6),o=Object(j.a)(s,2),i=o[0],l=o[1],m=Object(d.b)();Object(c.useEffect)((function(){i>0?setTimeout((function(){return l(i-1)}),1e3):(m({type:"SET_ATTACKER_GLOBAL",payload:null}),x(t.idGame,n.username,r.attackedBy,r.card))}),[i]);return Object(C.jsxs)("div",{className:"attackedGlobal",children:[Object(C.jsxs)("span",{children:["Permitir en ",i]}),"".concat(r.attackedBy," esta usando ").concat(r.card),Object(C.jsxs)("div",{style:{display:"flex"},children:[Object(C.jsx)("button",{onClick:function(){var e,c=t.gamer.filter((function(e){return e.user===r.attackedBy})),s=c[0].cards.filter((function(e){return e===r.card}));if(e=t.idGame,a.emit("blockCardAttackGlobal",{idGame:e}),s[0]){if(m({type:"SET_ATTACKER_GLOBAL",payload:null}),1===t.myUser.cards.length)return void v(t.idGame,n.username);m({type:"LOST_CARD",payload:{variable:"lostCard"}})}else{if(1===c[0].cards.length)return v(t.idGame,r.attackedBy),void m({type:"SET_ATTACKER_GLOBAL",payload:null});y(t.idGame,r.attackedBy),m({type:"SET_ATTACKER_GLOBAL",payload:null})}},children:"Desconfio"}),"embajador"===r.card&&Object(C.jsx)("button",{onClick:function(){f("duque",t.idGame,r.attackedBy,n.username),m({type:"SET_ATTACKER_GLOBAL",payload:null})},children:"Tengo el Duque"})]})]})}),L=(n(77),function(){var e=Object(d.c)((function(e){return Object(u.a)({},e)})),t=e.user,n=e.game,c=e.blocker,r=Object(d.b)();return Object(C.jsxs)("div",{className:"blocked",children:[Object(C.jsx)("p",{children:"".concat(c.blockedBy," esta bloqueando con ").concat(c.card)}),Object(C.jsxs)("div",{className:"blocked_options",children:[Object(C.jsx)("button",{onClick:function(){var e,s,o,i;e=n.idGame,s=t.username,o=c.blockedBy,i=c.card,a.emit("allowBlock",{idGame:e,attacked:s,attackedBy:o,card:i}),r({type:"SET_BLOCKER",payload:null})},children:"Permitir"}),Object(C.jsx)("button",{onClick:function(){var e=n.gamer.filter((function(e){return e.user===c.blockedBy}));if(e[0].cards.filter((function(e){return e===c.card}))[0]){if(1===n.myUser.cards.length)return v(n.idGame,t.username),void r({type:"SET_BLOCKER",payload:null});r({type:"SET_BLOCKER",payload:null}),r({type:"LOST_CARD",payload:{variable:"lostCard"}})}else{if("condesa"===c.card)return v(n.idGame,c.blockedBy),void r({type:"SET_BLOCKER",payload:null});if(1===e[0].cards.length)return v(n.idGame,c.blockedBy),void r({type:"SET_BLOCKER",payload:null});y(n.idGame,c.blockedBy),r({type:"SET_BLOCKER",payload:null})}},children:"Desconfiar"})]})]})}),D=(n(78),function(){var e=Object(d.c)((function(e){return Object(u.a)({},e)})),t=e.user,n=e.game,a=e.coup,c=Object(d.b)();return Object(C.jsxs)("div",{className:"coup",children:[Object(C.jsx)("h3",{children:"".concat(a.attackedBy," esta usando COUP")}),Object(C.jsx)("p",{children:"Elimina una carta"}),Object(C.jsx)("div",{className:"cards",children:n&&n.myUser.cards.map((function(e,a){return Object(C.jsx)("button",{className:"card",onClick:function(){return function(e){g(n.idGame,t.username,e),c({type:"SET_COUP",payload:null})}(e)},children:e},a)}))})]})}),I=(n(79),function(e){var t=e.msg;return Object(C.jsx)("div",{className:"messageGame",children:t})}),U=(n(80),function(){var e=Object(l.f)(),t=Object(d.b)();return Object(C.jsx)("div",{className:"lost",children:Object(C.jsxs)("div",{className:"container",children:[Object(C.jsx)("h1",{children:"PERDISTE EL JUEGO"}),Object(C.jsx)("button",{onClick:function(){localStorage.removeItem("currentGame"),t({type:"RESULT",payload:null}),e("/")},children:"Ir al Inicio"})]})})}),q=(n(81),function(){var e=Object(d.c)((function(e){return Object(u.a)({},e)})),t=e.user,n=e.game,a=Object(d.b)();return Object(C.jsxs)("div",{className:"lostCard",children:[Object(C.jsx)("p",{children:"Elimina una carta"}),Object(C.jsx)("div",{className:"cards",children:n&&n.myUser.cards.map((function(e,c){return Object(C.jsx)("button",{className:"card",onClick:function(){return function(e){g(n.idGame,t.username,e),a({type:"LOST_CARD",payload:null})}(e)},children:e},c)}))})]})}),P=(n(82),function(){var e=Object(l.f)(),t=Object(d.b)();return Object(C.jsx)("div",{className:"win",children:Object(C.jsxs)("div",{className:"container",children:[Object(C.jsx)("h1",{children:"GANASTE EL JUEGO!"}),Object(C.jsx)("button",{onClick:function(){localStorage.removeItem("currentGame"),t({type:"RESULT",payload:null}),e("/")},children:"Ir al Inicio"})]})})}),K=(n(83),function(){var e=Object(d.c)((function(e){return Object(u.a)({},e)})),t=e.user,n=e.game;return Object(C.jsx)("div",{className:"starting",children:n.createdBy===t.username?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("h3",{children:["Son ",n.gamer.length+1," Jugadores en espera"]}),Object(C.jsx)("button",{onClick:function(){var e;n.gamer.length>=1&&(e=n.idGame,a.emit("startGame",{idGame:e}))},children:"Comenzar Ahora"})]}):Object(C.jsxs)("h3",{children:["Son ",n.gamer.length+1," Jugadores en espera"]})})}),w=(n(84),function(){var e=Object(l.g)().idGame,t=Object(l.f)(),n=Object(d.c)((function(e){return Object(u.a)({},e)})),r=n.user,s=n.game,o=n.attacker,i=n.attackerGlobal,j=n.blocker,m=n.variables,b=n.result,p=n.descart,h=n.coup,f=Object(d.b)();return Object(c.useEffect)((function(){localStorage.getItem("token")||t("/login");try{a.id,function(e,t){a.emit("getGame",{idGame:e,username:t})}(e,null===r||void 0===r?void 0:r.username)}catch(n){O(f)}}),[r]),b?"lost"===b?Object(C.jsx)(U,{}):Object(C.jsx)(P,{}):Object(C.jsxs)("div",{className:"home",children:[s&&"initial"===s.state?"":(null===s||void 0===s?void 0:s.turn)===(null===r||void 0===r?void 0:r.username)?Object(C.jsx)(I,{msg:"Tu Turno"}):Object(C.jsx)(I,{msg:"Turno de ".concat(s&&(null===s||void 0===s?void 0:s.turn))}),o&&Object(C.jsx)(R,{}),i&&Object(C.jsx)(B,{}),j&&Object(C.jsx)(L,{}),m&&Object(C.jsx)(q,{}),h&&Object(C.jsx)(D,{}),p&&Object(C.jsx)(_,{}),Object(C.jsx)(S,{}),Object(C.jsx)(N,{position:"350px"}),Object(C.jsx)(A,{}),Object(C.jsx)(G,{}),s&&"initial"===s.state&&Object(C.jsx)(K,{})]})}),F=n(27),M=n(48),J=n.n(M).a.create({baseURL:"https://coup-alan.herokuapp.com/api"}),z=(n(103),function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)({username:"",password:""}),s=Object(j.a)(r,2),o=s[0],i=s[1],m=Object(l.f)(),b=Object(d.b)();Object(c.useEffect)((function(){localStorage.getItem("token")&&m("/")}),[m]);var O=function(e){i((function(t){return Object(u.a)(Object(u.a)({},t),{},Object(F.a)({},e.target.name,e.target.value))}))};return Object(C.jsxs)("div",{className:"login",children:[Object(C.jsxs)("div",{className:"login__card",children:[Object(C.jsx)("h2",{children:"Coup"}),Object(C.jsx)("input",{type:"text",placeholder:"Nombre de usuario",value:o.username,name:"username",onChange:O}),Object(C.jsx)("input",{type:"password",placeholder:"Contrase\xf1a",value:o.password,name:"password",onChange:O}),Object(C.jsx)("br",{}),Object(C.jsx)("button",{onClick:function(e){e.preventDefault(),o.username&&o.password?J.post("/auth/login",o).then((function(e){localStorage.setItem("token",e.data.token),b({type:"LOGGED_IN_USER",payload:{username:e.data.username}}),m("/")})).catch((function(e){return a("Ocurrio un problema en el servidor. Intentelo de nuevo.")})):a("Debes Completar Todos Los Campos")},children:"Iniciar Sesion"}),Object(C.jsx)("p",{children:"o"}),Object(C.jsx)("button",{onClick:function(e){e.preventDefault(),o.username&&o.password?o.username.length<4?a("Nombre De Usuario Demasiado Corto"):o.password.length<6?a("La Contrase\xf1a Debe Ser Mayor A 6 Caracteres"):J.post("/auth/register",o).then((function(e){localStorage.setItem("token",e.data.token),b({type:"LOGGED_IN_USER",payload:{username:e.data.username}}),m("/")})).catch((function(e){return a("Ya est\xe1 en uso ese nombre de usuario.")})):a("Debes Completar Todos Los Campos")},children:"Registrarse"})]}),n&&Object(C.jsx)(E,{msg:n,setError:a})]})}),X=(n(104),function(){var e=Object(l.f)(),t=Object(c.useState)(""),n=Object(j.a)(t,2),r=n[0],s=n[1],o=Object(d.c)((function(e){return Object(u.a)({},e)})),i=o.user,m=o.games,b=Object(d.b)();Object(c.useEffect)((function(){localStorage.getItem("token")||e("/login"),O(b),a.emit("getGames");var t=localStorage.getItem("currentGame");t&&s(t)}),[]);var p=function(t){!function(e,t){a.emit("joinGame",{username:e,idGame:t})}(i.username,t),s(localStorage.setItem("currentGame",t)),localStorage.setItem("state","playing"),e("/".concat(t))};return Object(C.jsxs)("div",{className:"start",children:[Object(C.jsx)(N,{position:"20px"}),Object(C.jsx)("button",{onClick:function(){var e=Math.floor(1e8*Math.random());s(e),localStorage.setItem("currentGame",e),function(e,t){a.emit("createGame",{username:e,idGame:t})}(i.username,e)},className:"openButton",disabled:r,children:"Abrir Partida"}),Object(C.jsxs)("div",{className:"start__list",children:[r?Object(C.jsxs)("div",{className:"container-games",style:{borderBottom:"1px solid #2b2b2b"},children:[Object(C.jsx)("div",{className:"container__info",children:Object(C.jsx)("h2",{children:"Tu Juego"})}),Object(C.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(C.jsx)("button",{onClick:function(){e("/".concat(r))},className:"btn-start",children:"Iniciar"}),Object(C.jsx)("button",{onClick:function(){var e,t;localStorage.removeItem("currentGame"),e=i.username,t=r,a.emit("deleteGame",{username:e,idGame:t}),s("")},className:"btn-end",children:"Cancelar"})]})]},r):"",m&&m.filter((function(e){return e.idGame!==r})).map((function(e,t){return Object(C.jsxs)("div",{className:"container-games",children:[Object(C.jsx)("div",{className:"container__info",children:Object(C.jsx)("h2",{children:e.createdBy})}),r?"":Object(C.jsx)("button",{onClick:function(){return p(e.idGame)},className:"btn-start",children:"Unirse"})]},t)}))]})]})}),Y=n(34),H=n.n(Y),Q=n(49),V=function(){var e=Object(Q.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.post("/auth/current-user",{},{headers:{token:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();n(106);var W=function(){var e=Object(d.b)();return Object(c.useEffect)((function(){var t=localStorage.getItem("token");t&&V(t).then((function(t){localStorage.setItem("token",t.data.token),e({type:"LOGGED_IN_USER",payload:{username:t.data.username}})})).catch((function(e){return console.log(e)}))}),[e]),Object(C.jsx)("div",{className:"App",children:Object(C.jsx)(i.a,{children:Object(C.jsxs)(l.c,{children:[Object(C.jsx)(l.a,{path:"/",element:Object(C.jsx)(X,{})}),Object(C.jsx)(l.a,{path:"/:idGame",element:Object(C.jsx)(w,{})}),Object(C.jsx)(l.a,{path:"/login",element:Object(C.jsx)(z,{})})]})})})},Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,108)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},$=n(30),ee=Object($.a)({action:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"SET_ACTION"===t.type?t.payload:e},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGGED_IN_USER":case"LOGOUT":return t.payload;default:return e}},game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"GET_GAME"===t.type?t.payload:e},games:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"GET_GAMES"===t.type?t.payload:e},attacker:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"SET_ATTACKER"===t.type?t.payload:e},attackerGlobal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"SET_ATTACKER_GLOBAL"===t.type?t.payload:e},blocker:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"SET_BLOCKER"===t.type?t.payload:e},variables:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"LOST_CARD"===t.type?t.payload:e},result:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"RESULT"===t.type?t.payload:e},descart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"DESCART_CARD"===t.type?t.payload:e},coup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"SET_COUP"===t.type?t.payload:e}}),te=ee,ne=Object($.b)(te);o.a.render(Object(C.jsx)(r.a.StrictMode,{children:Object(C.jsx)(d.a,{store:ne,children:Object(C.jsx)(W,{})})}),document.getElementById("root")),Z()},44:function(e){e.exports=JSON.parse('{"asesina":"Paga 3 monedas y asesina a un oponente.","embajador":"Intercambia una carta del mazo. Bloquea robos.","capitan":"Roba 2 monedas a un oponente. Bloquea robos.","condesa":"Bloquea asesinato.","duque":"Toma 3 monedas del tesoro. Bloquea embajador."}')},66:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){}},[[107,1,2]]]);
//# sourceMappingURL=main.0c737bbe.chunk.js.map